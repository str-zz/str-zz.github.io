<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long Division Visualizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            font-family: 'Inter', sans-serif;
        }
        .division-house-container {
            /* Use a monospaced font for perfect vertical alignment of digits */
            font-family: 'Space Mono', monospace;
        }
        /* Custom styles to create the "house" (division bracket) */
        .division-bracket {
            display: inline-flex;
            flex-direction: column;
            align-items: flex-start;
            position: relative;
        }
        .division-bracket::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 4px; /* The vertical line */
            background-color: #4b5563; /* Gray-600 */
            /* The translateY value must match the height of the quotient text 
               to start the line at the top of the dividend. This is 1.5rem (pt-6) 
               which is roughly the height of the text-3xl quotient line.
            */
            transform: translateY(1.5rem); 
        }
        .quotient-line {
            width: 100%;
            border-top: 4px solid #4b5563; /* The horizontal line (roof) */
            padding-top: 0.25rem;
            margin-bottom: 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-lg bg-white rounded-xl shadow-2xl p-6 md:p-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Long Division Visualizer</h1>
        <p class="text-sm text-gray-500 text-center mb-6">Enter a dividend and a divisor to see the result displayed in the standard long division format, with the **divisor outside the house**.</p>

        <!-- Input Fields -->
        <div class="flex flex-col md:flex-row gap-4 mb-8">
            <input type="number" id="dividendInput" placeholder="Dividend (e.g., 525)" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 outline-none transition duration-150" value="525">
            <input type="number" id="divisorInput" placeholder="Divisor (e.g., 25)" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 outline-none transition duration-150" value="25">
        </div>
        
        <button onclick="calculateDivision()" class="w-full bg-indigo-600 text-white font-semibold py-3 rounded-lg hover:bg-indigo-700 transition duration-200 shadow-md">
            Calculate Division
        </button>

        <!-- Division Result Display Area -->
        <div id="resultContainer" class="mt-10 p-6 bg-indigo-50 rounded-xl border border-indigo-200">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Result Layout:</h2>
            
            <div id="divisionDisplay" class="division-house-container text-4xl text-gray-800 flex items-start justify-center">
                <!-- Content will be injected here by JavaScript -->
            </div>

            <p id="errorMsg" class="text-red-600 text-center mt-4 hidden"></p>
        </div>
    </div>

    <script>
        // Global variables for Firebase constants (not used in this simple app, but mandatory to define)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        // Note: Auth and Firestore are not necessary for this client-side calculation app.

        // Function to perform division and update the display
        function calculateDivision() {
            const dividendInput = document.getElementById('dividendInput').value;
            const divisorInput = document.getElementById('divisorInput').value;
            const display = document.getElementById('divisionDisplay');
            const errorMsg = document.getElementById('errorMsg');

            // Reset
            display.innerHTML = '';
            // Safely remove the dynamically added remainder div if it exists from previous run
            const existingRemainder = display.parentElement.querySelector('#remainderDisplay');
            if (existingRemainder) existingRemainder.remove();
            errorMsg.classList.add('hidden');

            const dividend = parseInt(dividendInput);
            const divisor = parseInt(divisorInput);

            // --- Input Validation ---
            if (isNaN(dividend) || isNaN(divisor)) {
                errorMsg.textContent = "Please enter valid numbers for both the dividend and the divisor.";
                errorMsg.classList.remove('hidden');
                return;
            }
            if (divisor === 0) {
                errorMsg.textContent = "Cannot divide by zero.";
                errorMsg.classList.remove('hidden');
                return;
            }
            if (dividend < 0 || divisor < 0) {
                 errorMsg.textContent = "This visualizer currently supports non-negative integers only.";
                errorMsg.classList.remove('hidden');
                return;
            }

            // --- Calculation ---
            const quotient = Math.floor(dividend / divisor);
            const remainder = dividend % divisor;

            // --- HTML Structure Generation (Focus on the layout/house) ---
            
            // 1. Divisor (OUTSIDE the house)
            // pt-6 (1.5rem) aligns the divisor's baseline with the dividend, 
            // matching the vertical space taken by the quotient line and the roof line.
            const divisorHTML = `<span class="font-bold mr-2 pt-6 text-gray-700">${divisor}</span>`;
            
            // 2. The House/Bracket
            let bracketHTML = `
                <div class="division-bracket">
                    <!-- The Quotient (ON TOP of the house) -->
                    <div class="text-2xl md:text-3xl font-bold w-full pl-2">
                        ${quotient}
                    </div>

                    <div class="quotient-line w-full pl-2">
                        <!-- The Dividend (INSIDE the house) -->
                        <span class="text-2xl md:text-3xl font-bold">${dividend}</span>
                    </div>
                </div>
            `;

            // 3. Remainder (Displayed below the calculation for clarity)
            let remainderHTML = '';
            if (remainder !== 0) {
                remainderHTML = `<div id="remainderDisplay" class="text-xl md:text-2xl mt-4 text-gray-600 font-semibold w-full text-center">Remainder: ${remainder}</div>`;
            }

            // Combine and display
            display.innerHTML = divisorHTML + bracketHTML;
            
            // Add remainder text if needed (outside the primary division layout)
            if (remainderHTML) {
                display.parentElement.insertAdjacentHTML('beforeend', remainderHTML);
            }
        }

        // Run on load with default values
        window.onload = function() {
            calculateDivision();
        };

    </script>
</body>
</html>
